import{g as _,c as r,a as e,n as c,d as o,t as i,w as b,v as u,F as v,h as x,o as a}from"./index-C2RVd9S3.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";class d{constructor(s,g){this.id=s,this.value=g}}const m={data(){return{zenek:[],pb:void 0,collection:void 0,settingsCollection:void 0,votesVisible:new d(0,0),songsPerPerson:new d(0,3),songLimit:new d(0,1),isEnabled:new d(0,1)}},async mounted(){this.pb=new _("https://sp.myddns.me/pb"),this.pb.autoCancellation(!1),this.collection=this.pb.collection("zenek"),this.settingsCollection=this.pb.collection("settings"),await this.getSettings(),await this.getItems(),this.songsPerPersonInput=this.songsPerPerson.value,this.collection.subscribe("*",()=>this.getItems()),this.settingsCollection.subscribe("*",()=>this.getSettings())},methods:{async getItems(){const{items:l}=await this.collection.getList(1,1e4);this.zenek=l,this.zenek.sort((s,g)=>g.votes-s.votes)},async resetVotes(){await this.clearUsers();for(let l=0;l<this.zenek.length;l++){const s=this.zenek[l];await this.collection.update(s.id,{votes:null})}await this.getItems()},async deleteRecord(l){await this.collection.delete(l),await this.getItems()},async clearUsers(){for(let l=0;l<this.zenek.length;l++){const s=this.zenek[l];await this.collection.update(s.id,{uuid:null})}await this.getItems()},async deleteAll(){for(let l=0;l<this.zenek.length;l++){const s=this.zenek[l];await this.collection.delete(s.id)}await this.getItems()},async fixDB(){for(let l=0;l<this.zenek.length;l++){const s=this.zenek[l];s.lowercaseTitle!=s.title.toLowerCase()&&await this.collection.update(s.id,{lowercaseTitle:s.title.toLowerCase()})}},async getSettings(){await this.settingsCollection.getList(1,4).then(l=>{l.items.forEach(s=>{s.setting=="votesVisible"?this.votesVisible=new d(s.id,s.value):s.setting=="songsPerPerson"?this.songsPerPerson=new d(s.id,s.value):s.setting=="songLimit"?this.songLimit=new d(s.id,s.value):s.setting=="isEnabled"&&(this.isEnabled=new d(s.id,s.value))})})},async setSongsPerPerson(){await this.settingsCollection.update(this.songsPerPerson.id,{value:this.songsPerPersonInput})},async enableSite(){this.isEnabled.value==0?await this.settingsCollection.update(this.isEnabled.id,{value:1}):await this.settingsCollection.update(this.isEnabled.id,{value:0})},async toggleSongLimit(){let l=0;this.songLimit.value==0?l=1:l=0,await this.settingsCollection.update(this.songLimit.id,{value:l})},async toggleVotesVisible(){let l=0;this.votesVisible.value==0?l=1:l=0,await this.settingsCollection.update(this.votesVisible.id,{value:l})}}},p={class:"items-center flex min-h-screen flex-col bg-custom-bg-dark text-white"},y={class:"grid grid-rows-7 lg:grid-rows-1 grid-cols-1 lg:grid-cols-12 grid-flow-col bg-custom-custom-elevation-3 w-full text-center elevation-3 justify-center items-center"},k=e("div",{class:"lg:hidden lg:col-span-3 flex justify-around items-center border-b-4 py-2 border-stone-600"},[e("h1",{class:"text-xl"},[o("Zenedoboz"),e("br"),o("By: Lori")]),e("h1",{class:"text-xl"},"Version: E3.0")],-1),P={class:"flex items-center justify-center border-b-4 border-stone-600 lg:border-b-0 lg:border-r-2 lg:border-x-stone-600 h-full lg:col-span-2"},C=e("br",null,null,-1),V={class:"flex items-center justify-center lg:border-x-2 lg:border-x-stone-600 h-full lg:col-span-2 border-b-4 border-stone-600 lg:border-b-0"},z=e("br",null,null,-1),j={class:"flex lg:hidden items-center justify-center lg:col-span-2 lg:border-l-2 lg:border-r-4 lg:border-x-stone-600 h-full border-b-4 border-stone-600 lg:border-b-0"},S={class:"flex w-3/4 justify-between"},L=e("br",null,null,-1),E={class:"w-2/5 flex justify-center items-center"},I={class:"hidden lg:flex items-center justify-center lg:col-span-2 lg:border-l-2 lg:border-r-4 lg:border-x-stone-600 h-full border-b-4 border-stone-600 lg:border-b-0"},D=e("br",null,null,-1),B={class:"w-2/5 flex justify-center items-center"},F=e("div",{class:"hidden lg:col-span-3 lg:flex justify-around items-center"},[e("h1",{class:"text-xl"},[o("Zenedoboz"),e("br"),o("By: Lori")]),e("h1",{class:"text-xl"},"Version: E3.0")],-1),T={class:"flex items-center justify-center lg:border-l-4 lg:border-r-2 lg:border-x-stone-600 h-full border-b-4 border-stone-600 lg:border-b-0"},q=e("br",null,null,-1),A={class:"flex items-center justify-center lg:border-x-2 lg:border-x-stone-600 h-full border-b-4 border-stone-600 lg:border-b-0"},N=e("br",null,null,-1),O={class:"flex items-center justify-center lg:border-l-2 lg:border-x-stone-600 h-full border-b-4 border-stone-600 lg:border-b-0"},R={class:"hidden lg:flex items-center m-0 p-0 w-full"},U={class:"text-center w-full overflow-y-auto mb-4"},Z={class:"hover:bg-custom-custom-elevation-3 w-full grid grid-cols-36 pt-2 pb-2 gap-2 elevation-2"},M=e("span",null,null,-1),G=["onClick"],H={key:0,class:"text-3xl col-span-27 overflow-hidden flex items-center justify-center"},J=["href"],K=e("br",null,null,-1),Q={class:"text-red-400"},W=["href"],X={key:1,class:"text-3xl col-span-27 overflow-hidden"},Y=e("br",null,null,-1),$={class:"text-red-400"},ee=["href"],te=e("span",null,null,-1),se={class:"flex lg:hidden items-center m-0 p-0 w-full"},le={class:"text-center w-full overflow-y-auto mb-4"},oe={class:"hover:bg-custom-custom-elevation-3 w-full grid grid-cols-36 pt-2 pb-2 elevation-2"},ne=e("span",null,null,-1),ie=["onClick"],re=e("span",null,null,-1),ae={key:0,class:"text-xl col-span-32 overflow-hidden flex items-center justify-center text-wrap w-full"},de=["href"],ce=e("br",null,null,-1),ge={class:"text-red-400"},he=["href"],be={key:1,class:"text-xl col-span-32 overflow-hidden text-wrap"},ue=e("br",null,null,-1),ve={class:"text-red-400"},xe=["href"],fe=e("span",null,null,-1),_e=e("span",null,null,-1),we=e("span",null,null,-1);function me(l,s,g,pe,h,n){return a(),r("div",p,[e("div",y,[k,e("div",P,[e("button",{onClick:s[0]||(s[0]=(...t)=>n.toggleSongLimit&&n.toggleSongLimit(...t)),class:c(["text-white rounded-lg text-l p-1 mt-1 mb-1 lg:w-auto w-3/4",[this.songLimit.value==1?"bg-rose-700 elevation-4 hover:bg-rose-500 active:bg-rose-950":"bg-emerald-600  hover:bg-emerald-500 active:bg-emerald-800"]])},[o(" Turn request limit"),C,o(i(this.songLimit.value==1?"OFF":"ON"),1)],2)]),e("div",V,[e("button",{onClick:s[1]||(s[1]=(...t)=>n.toggleVotesVisible&&n.toggleVotesVisible(...t)),class:c(["bg-emerald-600 elevation-4 hover:bg-emerald-500 text-white rounded-lg text-l p-1 mt-1 mb-1 lg:w-auto w-3/4",[this.votesVisible.value==1?"bg-rose-700 elevation-4 hover:bg-rose-500 active:bg-rose-950":"bg-emerald-600  hover:bg-emerald-500 active:bg-emerald-800"]])},[o(" Turn votes visible"),z,o(i(this.votesVisible.value==1?"OFF":"ON"),1)],2)]),e("div",j,[e("div",S,[e("button",{onClick:s[2]||(s[2]=(...t)=>n.setSongsPerPerson&&n.setSongsPerPerson(...t)),class:"w-3/5 bg-emerald-600 elevation-4 hover:bg-emerald-500 text-white rounded-lg text-l p-1 mt-1 mb-1 active:bg-emerald-800"},[o(" Set requests "),L,o(" per person ")]),e("div",E,[b(e("input",{class:"text-black w-3/4 text-center h-3/4 text-2xl",type:"number",min:"1",max:"999","onUpdate:modelValue":s[3]||(s[3]=t=>l.songsPerPersonInput=t)},null,512),[[u,l.songsPerPersonInput]])])])]),e("div",I,[e("button",{onClick:s[4]||(s[4]=(...t)=>n.setSongsPerPerson&&n.setSongsPerPerson(...t)),class:"w-2/5 bg-emerald-600 elevation-4 hover:bg-emerald-500 text-white rounded-lg text-l p-1 mt-1 mb-1 active:bg-emerald-800"},[o(" Set requests "),D,o(" per person ")]),e("div",B,[b(e("input",{class:"text-black w-3/4 text-center",type:"number",min:"1",max:"999","onUpdate:modelValue":s[5]||(s[5]=t=>l.songsPerPersonInput=t)},null,512),[[u,l.songsPerPersonInput]])])]),F,e("div",T,[e("button",{onClick:s[6]||(s[6]=(...t)=>n.deleteAll&&n.deleteAll(...t)),class:"w-3/4 bg-rose-700 elevation-4 hover:bg-rose-500 text-white rounded-lg text-l p-1 mt-1 mb-1 active:bg-rose-950"},[o(" Delete"),q,o("all ")])]),e("div",A,[e("button",{onClick:s[7]||(s[7]=(...t)=>n.resetVotes&&n.resetVotes(...t)),class:"w-3/4 bg-rose-700 elevation-4 hover:bg-rose-500 text-white rounded-lg text-l p-1 mt-1 mb-1 active:bg-rose-950"},[o(" Reset"),N,o("votes ")])]),e("div",O,[e("button",{onClick:s[8]||(s[8]=(...t)=>n.enableSite&&n.enableSite(...t)),class:c(["w-3/4 text-white rounded-lg text-l p-1 mt-1 mb-1 h-3/4 lg:h-auto",[this.isEnabled.value==1?"bg-rose-700 elevation-4 hover:bg-rose-500 active:bg-rose-950":"bg-emerald-600  hover:bg-emerald-500 active:bg-emerald-800"]])},i(this.isEnabled.value==1?"Disable ZeneDoboz":"Enable ZeneDoboz"),3)])]),e("div",R,[e("ul",U,[(a(!0),r(v,null,x(h.zenek,t=>(a(),r("li",{class:"",key:t.id},[e("div",Z,[M,e("button",{class:"bg-rose-700 elevation-1 col-span-2 hover:bg-rose-500 active:bg-rose-950 text-white rounded-lg text-2xl py-1 px-3",onClick:f=>n.deleteRecord(t.id)}," Delete ",8,G),t.ytlink==""?(a(),r("span",H,[e("a",{target:"_blank",class:"hover:text-gray-400",href:`https://www.google.com/search?q=${t.title}`},i(t.title),9,J),K,e("span",Q,[e("a",{class:"hover:text-red-500",href:t.ytlink},i(t.ytlink),9,W)])])):(a(),r("span",X,[o(i(t.title),1),Y,e("span",$,[e("a",{target:"_blank",class:"hover:text-red-500",href:t.ytlink},i(t.ytlink),9,ee)])])),e("span",{class:c([[t.votes==0?"text-blue-400":t.votes<0?"text-red-600":t.votes>0?"text-emerald-600":""],"justify-center items-center flex text-3xl overflow-hidden col-span-2"])},i(t.votes),3)]),te]))),128))])]),e("div",se,[e("ul",le,[(a(!0),r(v,null,x(h.zenek,t=>(a(),r("li",{class:"",key:t.id},[e("div",oe,[ne,e("button",{class:"bg-rose-700 elevation-1 col-span-2 hover:bg-rose-500 active:bg-rose-950 text-white rounded-lg text-lg px-5 flex justify-center items-center",onClick:f=>n.deleteRecord(t.id)}," Del ",8,ie),re,t.ytlink==""?(a(),r("span",ae,[e("a",{target:"_blank",class:"hover:text-gray-400",href:`https://www.google.com/search?q=${t.title}`},i(t.title),9,de),ce,e("span",ge,[e("a",{class:"hover:text-red-500",href:t.ytlink},i(t.ytlink),9,he)])])):(a(),r("span",be,[o(i(t.title),1),ue,e("span",ve,[e("a",{target:"_blank",class:"hover:text-red-500 text-base",href:t.ytlink},i(t.ytlink),9,xe)])])),fe,e("span",{class:c([[t.votes==0?"text-blue-400":t.votes<0?"text-red-600":t.votes>0?"text-emerald-600":""],"justify-center items-center flex text-xl overflow-hidden col-span-2"])},i(t.votes),3)]),_e,we]))),128))])])])}const Pe=w(m,[["render",me]]);export{Pe as default};
