import{_ as u,C as b}from"./_plugin-vue_export-helper-DqxOl-qZ.js";import{c as a,a as t,n as h,d as o,t as n,w as v,v as m,F as f,g as x,o as c}from"./index-B9JQVCPl.js";class r{constructor(e,d){this.id=e,this.value=d}}const w={data(){return{zenek:[],pb:void 0,collection:void 0,settingsCollection:void 0,votesVisible:new r(0,0),songsPerPerson:new r(0,3),songLimit:new r(0,1)}},async mounted(){this.pb=new b("https://sp.myddns.me/pb"),this.pb.autoCancellation(!1),this.collection=this.pb.collection("zenek"),this.settingsCollection=this.pb.collection("settings"),await this.getSettings(),await this.getItems(),this.songsPerPersonInput=this.songsPerPerson.value,this.collection.subscribe("*",()=>this.getItems()),this.settingsCollection.subscribe("*",()=>this.getSettings())},methods:{async getItems(){const{items:s}=await this.collection.getList(1,1e4);this.zenek=s,this.zenek.sort((e,d)=>d.votes-e.votes)},async resetVotes(){await this.clearUsers();for(let s=0;s<this.zenek.length;s++){const e=this.zenek[s];await this.collection.update(e.id,{votes:null})}await this.getItems()},async deleteRecord(s){await this.collection.delete(s),await this.getItems()},async clearUsers(){for(let s=0;s<this.zenek.length;s++){const e=this.zenek[s];await this.collection.update(e.id,{uuid:null})}await this.getItems()},async deleteAll(){for(let s=0;s<this.zenek.length;s++){const e=this.zenek[s];console.log(e),await this.collection.delete(e.id)}await this.getItems()},async fixDB(){for(let s=0;s<this.zenek.length;s++){const e=this.zenek[s];e.lowercaseTitle!=e.title.toLowerCase()&&await this.collection.update(e.id,{lowercaseTitle:e.title.toLowerCase()})}},async getSettings(){await this.settingsCollection.getList(1,3).then(s=>{s.items.forEach(e=>{e.setting=="votesVisible"?this.votesVisible=new r(e.id,e.value):e.setting=="songsPerPerson"?this.songsPerPerson=new r(e.id,e.value):e.setting=="songLimit"&&(this.songLimit=new r(e.id,e.value),console.log(this.songLimit.value))})})},async setSongsPerPerson(){await this.settingsCollection.update(this.songsPerPerson.id,{value:this.songsPerPersonInput})},async toggleSongLimit(){let s=0;this.songLimit.value==0?s=1:s=0,await this.settingsCollection.update(this.songLimit.id,{value:s})},async toggleVotesVisible(){let s=0;this.votesVisible.value==0?s=1:s=0,await this.settingsCollection.update(this.votesVisible.id,{value:s})}}},_={class:"items-center flex min-h-screen flex-col bg-custom-bg-dark text-white"},p={class:"grid grid-cols-12 bg-custom-custom-elevation-3 w-full text-center elevation-3 justify-center items-center"},y={class:"flex elevation-4 items-center justify-center border-r-2 border-x-slate-400 h-full col-span-2"},k=t("br",null,null,-1),P={class:"flex items-center justify-center border-x-2 border-x-slate-400 h-full col-span-2"},V=t("br",null,null,-1),C={class:"flex items-center justify-center col-span-2 border-l-2 border-r-4 border-x-slate-400 h-full"},z={class:"w-2/5 flex justify-center items-center"},L=t("div",{class:"col-span-3 flex justify-around items-center"},[t("h1",{class:"text-xl"},[o("Zenedoboz"),t("br"),o("By: Lori")]),t("h1",{class:"text-xl"},"Version: E2.0")],-1),I={class:"flex items-center justify-center border-l-4 border-r-2 border-x-slate-400 h-full"},S=t("br",null,null,-1),j={class:"flex items-center justify-center border-x-2 border-x-slate-400 h-full"},U=t("br",null,null,-1),D={class:"flex items-center justify-center border-l-2 border-x-slate-400 h-full"},F=t("br",null,null,-1),T={class:"flex items-center m-0 p-0 w-full"},B={class:"text-center w-full overflow-y-auto mb-4"},A={class:"hover:bg-custom-custom-elevation-3 w-full grid grid-cols-36 pt-2 pb-2 gap-2 elevation-2"},N=t("span",null,null,-1),O=["onClick"],q={key:0,class:"text-3xl col-span-27 overflow-hidden flex items-center justify-center"},E=["href"],R=t("br",null,null,-1),M={class:"text-red-400"},Z=["href"],G={key:1,class:"text-3xl col-span-27 overflow-hidden"},H=t("br",null,null,-1),J={class:"text-red-400"},K=["href"],Q=t("span",null,null,-1);function W(s,e,d,X,g,i){return c(),a("div",_,[t("div",p,[t("div",y,[t("button",{onClick:e[0]||(e[0]=(...l)=>i.toggleSongLimit&&i.toggleSongLimit(...l)),class:h(["text-white rounded-lg text-l p-1 mt-1 mb-1 active:bg-rose-950",[this.songLimit.value==1?"bg-rose-700 elevation-4 hover:bg-rose-500":"bg-emerald-600  hover:bg-emerald-500"]])},[o(" Turn request limit"),k,o(n(this.songLimit.value==1?"OFF":"ON"),1)],2)]),t("div",P,[t("button",{onClick:e[1]||(e[1]=(...l)=>i.toggleVotesVisible&&i.toggleVotesVisible(...l)),class:h(["bg-emerald-600 elevation-4 hover:bg-emerald-500 text-white rounded-lg text-l p-1 mt-1 mb-1 active:bg-rose-950",[this.votesVisible.value==1?"bg-rose-700 elevation-4 hover:bg-rose-500":"bg-emerald-600  hover:bg-emerald-500"]])},[o(" Turn votes visible"),V,o(n(this.votesVisible.value==1?"OFF":"ON"),1)],2)]),t("div",C,[t("button",{onClick:e[2]||(e[2]=(...l)=>i.setSongsPerPerson&&i.setSongsPerPerson(...l)),class:"w-2/5 bg-emerald-600 elevation-4 hover:bg-emerald-500 text-white rounded-lg text-l p-1 mt-1 mb-1 active:bg-rose-950"}," Set requests per person "),t("div",z,[v(t("input",{class:"text-black w-3/4 text-center",type:"number",min:"1",max:"999","onUpdate:modelValue":e[3]||(e[3]=l=>s.songsPerPersonInput=l)},null,512),[[m,s.songsPerPersonInput]])])]),L,t("div",I,[t("button",{onClick:e[4]||(e[4]=(...l)=>i.deleteAll&&i.deleteAll(...l)),class:"w-3/4 bg-rose-700 elevation-4 hover:bg-rose-500 text-white rounded-lg text-l p-1 mt-1 mb-1 active:bg-rose-950"},[o(" Delete"),S,o("all ")])]),t("div",j,[t("button",{onClick:e[5]||(e[5]=(...l)=>i.resetVotes&&i.resetVotes(...l)),class:"w-3/4 bg-rose-700 elevation-4 hover:bg-rose-500 text-white rounded-lg text-l p-1 mt-1 mb-1 active:bg-rose-950"},[o(" Reset"),U,o("votes ")])]),t("div",D,[t("button",{onClick:e[6]||(e[6]=(...l)=>i.clearUsers&&i.clearUsers(...l)),class:"w-3/4 bg-rose-700 elevation-4 hover:bg-rose-500 text-white rounded-lg text-l p-1 mt-1 mb-1 active:bg-rose-950"},[o(" Clear"),F,o("UUIDs ")])])]),t("div",T,[t("ul",B,[(c(!0),a(f,null,x(g.zenek,l=>(c(),a("li",{class:"",key:l.id},[t("div",A,[N,t("button",{class:"bg-rose-700 elevation-1 col-span-2 hover:bg-rose-500 active:bg-rose-950 text-white rounded-lg text-2xl py-1 px-3",onClick:Y=>i.deleteRecord(l.id)}," Delete ",8,O),l.ytlink==""?(c(),a("span",q,[t("a",{target:"_blank",class:"hover:text-gray-400",href:`https://www.google.com/search?q=${l.title}`},n(l.title),9,E),R,t("span",M,[t("a",{class:"hover:text-red-500",href:l.ytlink},n(l.ytlink),9,Z)])])):(c(),a("span",G,[o(n(l.title),1),H,t("span",J,[t("a",{target:"_blank",class:"hover:text-red-500",href:l.ytlink},n(l.ytlink),9,K)])])),t("span",{class:h([[l.votes==0?"text-blue-400":l.votes<0?"text-red-600":l.votes>0?"text-emerald-600":""],"justify-center items-center flex text-3xl overflow-hidden col-span-2"])},n(l.votes),3)]),Q]))),128))])])])}const te=u(w,[["render",W]]);export{te as default};
